<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Faith-Based Property Ownership in Virginia - 1&nbsp; Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./part-2.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-1.html">Introduction</a></li><li class="breadcrumb-item"><a href="./part-1.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./img/vif_hfv.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Faith-Based Property Ownership in Virginia</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/housingforwardva/yigby" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part-1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Findings</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Findings</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#goal" id="toc-goal" class="nav-link active" data-scroll-target="#goal"><span class="header-section-number">1.1</span> Goal</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">1.2</span> Background</a></li>
  <li><a href="#research" id="toc-research" class="nav-link" data-scroll-target="#research"><span class="header-section-number">1.3</span> Research</a></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources"><span class="header-section-number">1.4</span> Data Sources</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology"><span class="header-section-number">1.5</span> Methodology</a></li>
  <li><a href="#data-accuracy" id="toc-data-accuracy" class="nav-link" data-scroll-target="#data-accuracy"><span class="header-section-number">1.6</span> Data Accuracy</a></li>
  <li><a href="#virginia-zoning-atlas" id="toc-virginia-zoning-atlas" class="nav-link" data-scroll-target="#virginia-zoning-atlas"><span class="header-section-number">1.7</span> Virginia Zoning Atlas</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part-1.html">Introduction</a></li><li class="breadcrumb-item"><a href="./part-1.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="goal" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="goal"><span class="header-section-number">1.1</span> Goal</h2>
<p>Estimate the number and characteristics of properties owned by faith-based organizations in Virginia. Provide data to help inform policy related to the development of affordable housing on these parcels.</p>
</section>
<section id="background" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="background"><span class="header-section-number">1.2</span> Background</h2>
<p>Senate Bill 233, which aimed to grant religious organizations certain powers to overcome local zoning barriers for affordable housing development on their own land, was continued in committee by the Virginia Senate during the 2024 General Assembly Session.</p>
<p>In response, a coalition led by the Virginia Interfaith Center for Public Policy has formed to explore future legislative strategies. This research project will provide essential data on the scope and scale of faith-based property ownership across Virginia to guide and substantiate new policy proposals.</p>
</section>
<section id="research" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="research"><span class="header-section-number">1.3</span> Research</h2>
<p>The primary objectives of this research are to identify and examine properties owned by faith-based organizations in Virginia, determining:</p>
<ul>
<li>Total number and acreage of parcels</li>
<li>of parcels by region</li>
<li>Proportion of undeveloped vs.&nbsp;actively used properties</li>
<li>Development potential based on current zoning (for a representative sample of properties)</li>
</ul>
</section>
<section id="data-sources" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="data-sources"><span class="header-section-number">1.4</span> Data Sources</h2>
<p>The research that follows relies on three primary data sources:</p>
<ol type="1">
<li><p>LOVELAND Technologies’ Regrid dataset for Virginia (comprehensive statewide parcel dataset)</p></li>
<li><p>Property lists provided by faith associations</p></li>
<li><p>U.S. Department of Homeland Security’s Homeland Infrastructure Foundation-Level Data (HIFLD) - All Places of Worship dataset for Virginia</p></li>
</ol>
</section>
<section id="methodology" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="methodology"><span class="header-section-number">1.5</span> Methodology</h2>
<p>LOVELAND Technologies’ Regrid dataset for Virginia provides the most comprehensive source to investigate properties based on ownership. This dataset has several fields of interest that can help determine the ownership and use of a property. While not all jurisdictions in Virginia have full data field coverage in Regrid, there is no comparable data source.</p>
<p>To identify faith-based organizations, HFV employed an extensive series of filtering and key word search to retain parcels likely owned by a faith-based organization, while removing properties that were definitively not a place of worship or a property owned by a likely faith-based organization.</p>
<p>In Virginia, there are over 4 million individual parcels. Working with such a large dataset required an investigation of available fields in the Regrid dataset and keywords that would help identify faith-based organizations.</p>
<p>A keyword list was developed based on an investigation of the Department of Homeland Security’s “Homeland Infrastructure Foundation-Level Data (HIFLD) - All Places of Worship” dataset for Virginia. Utilizing the R programming language, we identified words that appeared 30 or more times among names of places of worship in Virginia. This list of 96 terms was reviewed internally by HFV staff and terms that could result in false positives were removed. This list was shared with Virginia Interfaith Center for Public Policy to review and suggest additions or changes.</p>
<p>[Insert table of keywords]</p>
<p>To reduce the over 4 million individual parcels to a manageable size, HFV utilized the Land Based Classification Standards Activity code provided in the Regrid dataset to remove parcels that were known to be used for activities unrelated to places of worship or unknown activities. In addition, the Regrid dataset utilizes United States Postal Service data to determine whether a property is a residential address. This field is known as the Residential Delivery (RDI). Entries wherein RDI was identified as “N” for not a residential delivery address or where the value was NA were retained.</p>
<p>This helped to reduce the dataset from 4 million entries to just over 800,000.</p>
<p>Utilizing the word list, we detected all instances where a term was present in the owner name field. These entries were retained and resulted in a reduction in entries from over 800,000 to 25,121. The Use Description (usedesc) field of the dataset was used to identify known properties denoted as a faith-based property. A column was created to denote whether a property was a confirmed religious use and another column was created to denote whether the use was a cemetery.</p>
<p>Entries that were a confirmed religious use were retained in a separate dataframe and the remaining entries were analyzed. Cemetery properties were removed from the dataframe because the likelihood of cemetery properties being redeveloped for housing is low.</p>
<p>Following this was a series of retaining and eliminating entries based on keywords. This involved multiple manual reviews of the data to identify common terms that could lead to the retention or elimination of entries that were false positives. For example, a review would lead to the identification of several instances of “Mocha Temple”. The Mocha Shriners are a fraternal order and not a faith-based organization, but they often refer to their properties as temples. Therefore, “Mocha” was used as a word to eliminate entries from the dataframe.</p>
<p>In contrast, there were several words that were always associated with a faith-based property. These words or phrases were used to retain entries. For example, the term “Lutheran” and “Presbyterian” were always associated with a faith-based organization.</p>
<p>To aid in the confirmation of faith-based organizations, data from the Virginia State Corporation Commission (SCC) was used to retain entries of confirmed religious organizations. The SCC is responsible for granting corporate charters to religious organizations in Virginia, which are considered non-stock corporations. A list of these organizations was matched to the dataframe based on entity names.</p>
<p>The series of data retention and elimination led to two dataframes: a dataframe of 22,387 entries where the likelihood of ownership by a faith-based organization was confirmed or high and a dataframe of 1,318 unconfirmed entries. This unconfirmed dataframe was manageable for a manual review. The unconfirmed dataframe was manually reviewed by HFV and entries that were not a faith-based organization were removed. This includes individuals wherein their name resulted in a false positive (e.g., their named contained the word “Lord,” “Christian,” or “Church”). Other entries that were removed were companies or other entities that were more than likely not a faith-based organization. This manual review resulted in the reduction of the unconfirmed dataframe to 415 entries.</p>
<p>The resulting dataframes were combined leading to a total of 22,802 entries.</p>
<p>An additional review of the data identified the continued presence of certain terms and other organizations not previously removed. This included schools, academies, media companies, and cemeteries. These entries were removed and resulted in a total of 22,466 entries. Instances of duplicate parcels existed and were identified using Regrid’s “ll_uuid” field, which uniquely identifies a single parcel. This further reduced the total number of entries to 22,453.</p>
<p>The resulted data were then combined with geospatial data in QGIS to calculate the acreage for all parcels. While LOVELAND Technologies provides this data as a field, their coverage was not complete for all jurisdictions. This dataset was used in the ensuing analysis.</p>
</section>
<section id="data-accuracy" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="data-accuracy"><span class="header-section-number">1.6</span> Data Accuracy</h2>
<p>The final dataset represents an <em>estimation</em> of faith-based property ownership in Virginia. The exact count of faith-based properties in Virginia could be higher or lower than the final count in this report. However, the results of this report represent the most comprehensive statewide investigation to date.</p>
<p>Confidence levels are created to quantify the reliability and accuracy of statistical estimates or predictions. In the context of classifying properties as faith-based organizations, confidence levels serve several crucial purposes:</p>
<p>Measure of Certainty: They provide a numerical representation of how certain we are about the accuracy of our classification method. Quality Assurance: They help in assessing the reliability of the data and the classification process. Decision Support: They aid in making informed decisions based on the level of confidence in the results. Transparency: They offer a clear way to communicate the reliability of the findings to stakeholders. Improvement Guidance: They highlight areas where the classification method might need refinement.</p>
<p>How Confidence Levels Were Created for This Analysis The process of creating confidence levels for the faith-based property classification involved several key steps:</p>
<ol type="1">
<li><p>Sampling: From the total 22,453 properties classified, a random sample of 378 was selected. This sample size was determined to achieve a 95% confidence level with a 5% margin of error.</p></li>
<li><p>Verification: Each property in the sample was manually verified to determine if it was correctly classified as faith-based.</p></li>
<li><p>Accuracy Calculation: The proportion of correctly classified properties in the sample was calculated, providing an estimate of the overall accuracy.</p></li>
<li><p>Confidence Interval Calculation: Using the sample results, a 95% confidence interval for the true accuracy was computed. This interval provides a range within which we can be 95% confident the true accuracy lies.</p></li>
<li><p>Confidence Level Assignment: Based on the calculated accuracy, a confidence level was assigned using predefined criteria:</p>
<ul>
<li><p>95-100% accuracy: Very High Confidence</p></li>
<li><p>90-94% accuracy: High Confidence</p></li>
<li><p>80-89% accuracy: Moderate Confidence</p></li>
<li><p>70-79% accuracy: Low Confidence Below</p></li>
<li><p>70% accuracy: Very Low Confidence</p></li>
</ul></li>
<li><p>Statistical Analysis: The binomial test was used to calculate the confidence interval, accounting for the sample size and observed accuracy.</p></li>
<li><p>Interpretation: The results were interpreted to understand the implications of the confidence interval and assigned confidence level.</p></li>
</ol>
<p>This process allows for a nuanced understanding of the classification accuracy. For instance, if the sample showed 92% accuracy with a confidence interval of [88.89%, 94.50%], we can say with 95% confidence that the true accuracy of the classification method lies between 88.89% and 94.50%. This would be assigned a “High Confidence” level.</p>
<p>The creation of these confidence levels provides a robust framework for assessing the reliability of the property classification. It acknowledges that while the method may not be perfect, we can quantify its accuracy and express our certainty about the results. This approach balances the need for practical usability of the data with a clear understanding of its limitations, enabling more informed decision-making and targeted improvements to the classification method if needed.</p>
<p>Based on a random sample of 378 entries, 100% of entries sampled were a faith-based organization. Using the Wilson score interval method, which is more appropriate than the normal approximation when proportions are very high or low, the lower bound confidence interval is 99.03% and the upper bound is 100%. Therefore, we can be 95% confident that the true accuracy of the entire dataset lies between 99.03% and 100%.</p>
<p>This result is statistically significant, indicating that the high accuracy is very unlikely to be due to chance. However, there is a high chance that the data set may be missing faith-based owned parcels that were not captured using the keywords. Additional analysis and cross-referencing for a sample of jurisdictions could enhance the data in the future.</p>
</section>
<section id="virginia-zoning-atlas" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="virginia-zoning-atlas"><span class="header-section-number">1.7</span> Virginia Zoning Atlas</h2>
<p>The Virginia Zoning Atlas is a project of HousingForward Virginia that seeks to analyze and map all of the zoning districts in Virginia. The purpose of the Virginia Zoning Atlas is to understand how much developable land in Virginia allows or does not allow for diverse types of housing. To date, HFV has completed three regions based on regional planning district commissions.</p>
<p>The atlas offers opportunities to apply data collected on zoning to other areas of interest, including development viability based on zoning. With the zoning atlas, we will be able to determine what type of housing can be built on faith-based owned properties and conduct additional analysis.</p>
<p>By-right zoning for residential development on faith-based owned properties reduces a significant barrier to residential development. But requiring faith-based organizations to go through a public hearing process in order to develop housing can increase costs or lead to project-ending opposition from existing residents.</p>
<p>Utilizing the Northern Virginia region as a case study, HFV will examine the zoning of faith-based owned properties within the footprint of the Northern Virginia Regional Commission (NVRC). The Northern Virginia region’s zoning atlas was completed by the Mercatus Center at George Mason University in collaboration with HousingForward Virginia and the Urban Institute.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="About">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">About</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./part-2.html" class="pagination-link" aria-label="Findings">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Findings</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>